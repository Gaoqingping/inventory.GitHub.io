(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"3e89":function(e,t,i){var n=i("8d83");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("b518461a",n,!0,{sourceMap:!1,shadowMode:!1})},"3eaa":function(e,t,i){"use strict";i("99af"),i("4160"),i("c975"),i("ac1f"),i("466d"),i("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("0345"),o={name:"Login",data:function(){return{tostText:"",phoneNumber:"",password:"",displayPwd:!1,disableLogin:!1,modalName:"",loginTips:""}},mounted:function(){},onLoad:function(e){var t={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};if(console.log("语言版本: "+t.language),console.log(" 是否为移动终端: "+t.versions.mobile),console.log(" ios终端: "+t.versions.ios),console.log(" android终端: "+t.versions.android),console.log(" 是否为iPhone: "+t.versions.iPhone),console.log(" 是否iPad: "+t.versions.iPad),console.log(navigator.userAgent),uni.getStorageSync("LoginUser")){var i=JSON.parse(uni.getStorageSync("LoginUser")),n=i.externalUser,o=i.pwd;n&&o&&(this.phoneNumber=n,this.password=o)}},beforeDestroy:function(){},created:function(){},methods:{togglePwdDisplay:function(){this.displayPwd=!this.displayPwd},handleLogin:function(){var e=this,t=this.phoneNumber.trim(),i=this.password.trim();if(t&&i){this.disableLogin=!0,this.disableLogin=!1;var o="".concat(n.API.common.login,"?sysCode=RedseaP&j_username=").concat(this.phoneNumber,"&j_password=").concat(this.password,"&returnType=user");uni.showLoading({title:"登录中"});var a=["/RedseaPlatform","/erp"];a.forEach((function(t){var i=t+"/Logout/?onlyLogout=true";e.$http.get(i)})),this.$http.get(o,{header:{"content-type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},withCredentials:!0}).then((function(t){if("1"==t.data.state){var n={userId:t.data.result.user.userId,roleId:"SOS_SHOPOWNER"};e.$utils.getSqlId("query_user_has_role",n).then((function(n){if(!(n.data.jsonList.length>0))return e.loginTips="该账户没有资产盘点权限,禁止登录",void(e.modalName="DialogModal");var o=t.data.result.user;o.pwd=i,uni.setStorageSync("LoginUser",JSON.stringify(o)),e.$utils.getSqlId("query_sos_shop_by_staff_id",{staffId:o.staffId,deptStruId:o.deptStruId}).then((function(e){if("1"==e.data.state){console.log("res.data.jsonList[0]",e.data.jsonList[0]);var t=e.data.jsonList[0];uni.setStorageSync("FinanceCode",t.FINANCE_CODE),uni.setStorageSync("SosShop",JSON.stringify(t)),uni.navigateTo({url:"/pages/index/menu"})}else uni.showToast({title:"获取门店信息失败",icon:"none"})})),uni.navigateTo({url:"/pages/index/inventory"})}))}else uni.showToast({title:"用户名或密码错误",icon:"none"})})).catch((function(e){console.log("获取用户失败"),console.log(e)}))}else uni.showToast({title:"请输入用户名/密码",icon:"none"})},hideModal:function(){this.modalName=null}}};t.default=o},"4b8e":function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"flex flex-direction align-canter justify-center ",staticStyle:{height:"90vh"}},[i("v-uni-view",{staticClass:"cu-form-group margin round"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"cuIcon-people text-blue",staticStyle:{"font-size":"20px"}})],1),i("v-uni-input",{attrs:{type:"text",focus:!0,placeholder:"请输入账号"},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber="string"===typeof t?t.trim():t},expression:"phoneNumber"}})],1),i("v-uni-view",{staticClass:"cu-form-group margin round"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"cuIcon-lock text-blue",staticStyle:{"font-size":"20px"}})],1),i("v-uni-input",{attrs:{type:e.displayPwd?"text":"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),i("v-uni-view",{staticClass:"title",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.togglePwdDisplay.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"text-blue",class:e.displayPwd?"cuIcon-attention":"cuIcon-attentionforbid",staticStyle:{"font-size":"20px"}})],1)],1),i("v-uni-view",{staticClass:"padding flex flex-direction",staticStyle:{width:"100%"}},[i("v-uni-button",{staticClass:"cu-btn bg-blue round margin-tb-sm lg",attrs:{disabled:e.disableLogin},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLogin.apply(void 0,arguments)}}},[e._v("登录")])],1),i("v-uni-view",{staticClass:"cu-modal",class:"DialogModal"==e.modalName?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-info text-orange"}),e._v("提示")],1)],1),i("v-uni-view",{staticClass:"padding-xl text-xl"},[e._v(e._s(e.loginTips))]),i("v-uni-view",{staticClass:"cu-bar bg-white justify-center"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn bg-blue margin-left",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideModal.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)],1)],1)],1)},a=[]},"5ac1":function(e,t,i){"use strict";i.r(t);var n=i("3eaa"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},7552:function(e,t,i){"use strict";i.r(t);var n=i("4b8e"),o=i("5ac1");for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i("c850");var s,r=i("f0c5"),d=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"571d58be",null,!1,n["a"],s);t["default"]=d.exports},"8d83":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"body[data-v-571d58be]{background:#fff}.bg-img[data-v-571d58be]{width:100%;height:auto}.login[data-v-571d58be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:2rem 2rem 0}.info-container[data-v-571d58be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;width:100%;height:2rem}.info-container[data-v-571d58be]:nth-child(2){margin-top:.8rem}.info-icon-container[data-v-571d58be],\n.info-input[data-v-571d58be]{box-sizing:border-box;height:100%;border:1px solid #cecece}.info-icon-container[data-v-571d58be]{width:1.52rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff;border-top-left-radius:.106667rem;border-bottom-left-radius:.106667rem;border-right:0}.user-icon[data-v-571d58be]{width:.666667rem;height:.746667rem}.pwd-icon[data-v-571d58be]{width:.64rem;height:.746667rem}.info-input[data-v-571d58be]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#333;outline:0;border-top-right-radius:.106667rem;border-bottom-right-radius:.106667rem;padding:.36rem .48rem}[data-v-571d58be]::-webkit-input-placeholder{color:#aaa}.pwd-on-off-icon[data-v-571d58be]{width:.586667rem;height:.386667rem;position:absolute;right:1.28rem;margin-top:.36rem}.loginbtn[data-v-571d58be]{width:100%;height:2rem;margin-top:1rem;border-radius:.106667rem;color:#fff;border:none;outline:0}.loginbtn[data-v-571d58be]:active{background-color:#f07818}.loginbtn[data-v-571d58be]:disabled{background-color:#cecece}.login-loading-wrapper[data-v-571d58be],\n.login-mask[data-v-571d58be]{position:absolute;left:0;top:0;width:100%;height:100%}.login-mask[data-v-571d58be]{opacity:.6;background:#000;z-index:98}.login-loading-wrapper[data-v-571d58be]{padding-top:6.68rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;z-index:99}.login-loading-bg[data-v-571d58be]{width:4.533333rem;height:4.533333rem;background:#333;border-radius:.106667rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.loading-icon[data-v-571d58be]{width:1.6rem;height:1.6rem}.loginTxt[data-v-571d58be]{margin-top:.48rem;font-size:.4rem;color:#fff}",""]),e.exports=t},c850:function(e,t,i){"use strict";var n=i("3e89"),o=i.n(n);o.a}}]);